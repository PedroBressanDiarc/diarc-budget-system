{
  "query": "-- Criar tabela de chats (conversas)\nCREATE TABLE IF NOT EXISTS `chats` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `name` varchar(255), -- Nome do grupo (NULL para chat privado)\n  `isGroup` boolean NOT NULL DEFAULT false, -- true = grupo, false = privado\n  `createdBy` int NOT NULL, -- Criador do chat/grupo\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Criar tabela de participantes do chat\nCREATE TABLE IF NOT EXISTS `chat_participants` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `chatId` int NOT NULL, -- ID do chat\n  `userId` int NOT NULL, -- ID do usuário participante\n  `joinedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `lastRead` timestamp, -- Última vez que leu mensagens\n  UNIQUE KEY `unique_chat_user` (`chatId`, `userId`)\n);\n\n-- Criar tabela de mensagens\nCREATE TABLE IF NOT EXISTS `messages` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `chatId` int NOT NULL, -- ID do chat\n  `senderId` int NOT NULL, -- ID do usuário que enviou\n  `content` text NOT NULL, -- Conteúdo da mensagem\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Criar índices para melhor performance\nCREATE INDEX IF NOT EXISTS `idx_chat_participants_chatId` ON `chat_participants` (`chatId`);\nCREATE INDEX IF NOT EXISTS `idx_chat_participants_userId` ON `chat_participants` (`userId`);\nCREATE INDEX IF NOT EXISTS `idx_messages_chatId` ON `messages` (`chatId`);\nCREATE INDEX IF NOT EXISTS `idx_messages_createdAt` ON `messages` (`createdAt`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2FYRcYGi4pb6onw.cb424ff095fe --database Rjwg2XpN7AjHEkC6dWznWM --execute -- Criar tabela de chats (conversas)\nCREATE TABLE IF NOT EXISTS `chats` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `name` varchar(255), -- Nome do grupo (NULL para chat privado)\n  `isGroup` boolean NOT NULL DEFAULT false, -- true = grupo, false = privado\n  `createdBy` int NOT NULL, -- Criador do chat/grupo\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Criar tabela de participantes do chat\nCREATE TABLE IF NOT EXISTS `chat_participants` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `chatId` int NOT NULL, -- ID do chat\n  `userId` int NOT NULL, -- ID do usuário participante\n  `joinedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `lastRead` timestamp, -- Última vez que leu mensagens\n  UNIQUE KEY `unique_chat_user` (`chatId`, `userId`)\n);\n\n-- Criar tabela de mensagens\nCREATE TABLE IF NOT EXISTS `messages` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `chatId` int NOT NULL, -- ID do chat\n  `senderId` int NOT NULL, -- ID do usuário que enviou\n  `content` text NOT NULL, -- Conteúdo da mensagem\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Criar índices para melhor performance\nCREATE INDEX IF NOT EXISTS `idx_chat_participants_chatId` ON `chat_participants` (`chatId`);\nCREATE INDEX IF NOT EXISTS `idx_chat_participants_userId` ON `chat_participants` (`userId`);\nCREATE INDEX IF NOT EXISTS `idx_messages_chatId` ON `messages` (`chatId`);\nCREATE INDEX IF NOT EXISTS `idx_messages_createdAt` ON `messages` (`createdAt`);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3610
}