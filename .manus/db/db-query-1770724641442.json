{
  "query": "-- Limpar dados existentes da tabela users\nTRUNCATE TABLE users;\n\n-- Aplicar migração\nALTER TABLE `users` DROP INDEX `users_openId_unique`;\nALTER TABLE `users` MODIFY COLUMN `openId` varchar(64);\nALTER TABLE `users` MODIFY COLUMN `name` text NOT NULL;\nALTER TABLE `users` MODIFY COLUMN `email` varchar(320) NOT NULL;\nALTER TABLE `users` MODIFY COLUMN `loginMethod` varchar(64) DEFAULT 'local';\nALTER TABLE `users` ADD `username` varchar(100);\nALTER TABLE `users` ADD `passwordHash` varchar(255) NOT NULL;\nALTER TABLE `users` ADD `isActive` int DEFAULT 1 NOT NULL;\nALTER TABLE `users` ADD CONSTRAINT `users_username_unique` UNIQUE(`username`);\nALTER TABLE `users` ADD CONSTRAINT `users_email_unique` UNIQUE(`email`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2FYRcYGi4pb6onw.cb424ff095fe --database Rjwg2XpN7AjHEkC6dWznWM --execute -- Limpar dados existentes da tabela users\nTRUNCATE TABLE users;\n\n-- Aplicar migração\nALTER TABLE `users` DROP INDEX `users_openId_unique`;\nALTER TABLE `users` MODIFY COLUMN `openId` varchar(64);\nALTER TABLE `users` MODIFY COLUMN `name` text NOT NULL;\nALTER TABLE `users` MODIFY COLUMN `email` varchar(320) NOT NULL;\nALTER TABLE `users` MODIFY COLUMN `loginMethod` varchar(64) DEFAULT 'local';\nALTER TABLE `users` ADD `username` varchar(100);\nALTER TABLE `users` ADD `passwordHash` varchar(255) NOT NULL;\nALTER TABLE `users` ADD `isActive` int DEFAULT 1 NOT NULL;\nALTER TABLE `users` ADD CONSTRAINT `users_username_unique` UNIQUE(`username`);\nALTER TABLE `users` ADD CONSTRAINT `users_email_unique` UNIQUE(`email`);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 5530
}